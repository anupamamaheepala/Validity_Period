2025-05-22 08:28:21 - appLogger - INFO - Logger configured with path: D:/Telecom/Validity_Period_Monitor/log/default.log (env: development)
2025-05-22 08:28:21 - appLogger - INFO - Starting Validity Period Monitor application
2025-05-22 08:28:22 - dbLogger - INFO - MongoDB connection established successfully.
2025-05-22 08:28:22 - dbLogger - INFO - Connected to MongoDB database: Validity_Period
2025-05-22 08:28:22 - dbLogger - INFO - MongoDB connection closed.
2025-05-22 08:28:22 - dbLogger - INFO - MongoDB connection established successfully.
2025-05-22 08:28:23 - appLogger - DEBUG - Processing case 2 with DRC list: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:28:24 - appLogger - DEBUG - Checking DRC list: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:28:24 - appLogger - DEBUG - Active DRCs after filtering: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:28:24 - appLogger - DEBUG - Selected active DRC: {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}
2025-05-22 08:28:24 - appLogger - DEBUG - Case 2: expire_date=2025-05-22 00:00:00+00:00, current_date=2025-05-22 02:58:22.577975+00:00, time_to_expiry=-1 day, 21:01:37.422025
2025-05-22 08:28:24 - appLogger - INFO - Case 2 expired. Directing to Letter of Demand.
2025-05-22 08:28:24 - dbLogger - INFO - Updated DRC 9 in case 2 to Expired, Direct to Letter of Demand
2025-05-22 08:28:24 - appLogger - DEBUG - Processing case 18 with DRC list: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:28:24 - appLogger - DEBUG - Checking DRC list: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:28:24 - appLogger - DEBUG - Active DRCs after filtering: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:28:24 - appLogger - DEBUG - Selected active DRC: {'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}
2025-05-22 08:28:24 - appLogger - DEBUG - Case 18: expire_date=2025-05-25 00:00:00+00:00, current_date=2025-05-22 02:58:22.577975+00:00, time_to_expiry=2 days, 21:01:37.422025
2025-05-22 08:28:24 - appLogger - INFO - Sending 3-day alert for case 18 (expires 2025-05-25 00:00:00+00:00)
2025-05-22 08:28:24 - dbLogger - INFO - Updated DRC 5001 in case 18 to Last Alert Received
2025-05-22 08:28:24 - dbLogger - INFO - MongoDB connection closed.
2025-05-22 08:28:24 - appLogger - INFO - Validity period check completed successfully
2025-05-22 08:29:55 - appLogger - INFO - Logger configured with path: D:/Telecom/Validity_Period_Monitor/log/default.log (env: development)
2025-05-22 08:29:55 - appLogger - INFO - Starting Validity Period Monitor application
2025-05-22 08:29:56 - dbLogger - INFO - MongoDB connection established successfully.
2025-05-22 08:29:56 - dbLogger - INFO - Connected to MongoDB database: Validity_Period
2025-05-22 08:29:56 - dbLogger - INFO - MongoDB connection closed.
2025-05-22 08:29:56 - dbLogger - INFO - MongoDB connection established successfully.
2025-05-22 08:29:57 - appLogger - DEBUG - Processing case 2 with DRC list: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:29:57 - appLogger - DEBUG - Checking DRC list: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:29:57 - appLogger - DEBUG - Active DRCs after filtering: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:29:57 - appLogger - DEBUG - Selected active DRC: {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}
2025-05-22 08:29:57 - appLogger - DEBUG - Case 2: expire_date=2025-05-22 00:00:00+00:00, current_date=2025-05-22 02:59:56.604740+00:00, time_to_expiry=-1 day, 21:00:03.395260
2025-05-22 08:29:57 - appLogger - INFO - Case 2 expired. Directing to Letter of Demand.
2025-05-22 08:29:57 - dbLogger - INFO - Updated DRC 9 in case 2 to Expired, Direct to Letter of Demand
2025-05-22 08:29:57 - appLogger - DEBUG - Processing case 18 with DRC list: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-04T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-27T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:29:57 - appLogger - DEBUG - Checking DRC list: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-04T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-27T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:29:57 - appLogger - DEBUG - Active DRCs after filtering: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-04T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-27T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 08:29:57 - appLogger - DEBUG - Selected active DRC: {'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-04T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-27T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}
2025-05-22 08:29:57 - appLogger - DEBUG - Case 18: expire_date=2025-05-27 00:00:00+00:00, current_date=2025-05-22 02:59:56.604740+00:00, time_to_expiry=4 days, 21:00:03.395260
2025-05-22 08:29:57 - dbLogger - INFO - MongoDB connection closed.
2025-05-22 08:29:57 - appLogger - INFO - Validity period check completed successfully
2025-05-22 09:31:40 - appLogger - INFO - Logger configured with path: D:/Telecom/Validity_Period_Monitor/log/default.log (env: development)
2025-05-22 09:31:40 - appLogger - INFO - Starting Validity Period Monitor application
2025-05-22 09:31:40 - dbLogger - INFO - MongoDB connection established successfully.
2025-05-22 09:31:40 - dbLogger - INFO - Connected to MongoDB database: Validity_Period
2025-05-22 09:31:40 - dbLogger - INFO - MongoDB connection closed.
2025-05-22 09:31:40 - dbLogger - INFO - MongoDB connection established successfully.
2025-05-22 09:31:41 - appLogger - DEBUG - Processing case 2 with DRC list: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 09:31:41 - appLogger - DEBUG - Checking DRC list: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 09:31:41 - appLogger - DEBUG - Active DRCs after filtering: [{'order_id': 1, 'drc_id': 7, 'drc_name': 'DRC A', 'created_dtm': {'$date': '2025-01-03T09:30:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-01-01T09:45:00.000Z'}, 'expire_dtm': {'$date': '2025-06-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-02-07T06:36:23.181Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 1, 'assigned_dtm': {'$date': '2025-02-02T14:59:04.206Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 2, 'drc_id': 8, 'drc_name': 'Galle Recovery Services', 'created_dtm': {'$date': '2025-05-01T10:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-05-01T10:15:00.000Z'}, 'expire_dtm': {'$date': '2025-11-01T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 11, 'recovery_officers': [{'ro_id': 2, 'assigned_dtm': {'$date': '2025-05-01T11:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}, {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 09:31:41 - appLogger - DEBUG - Selected active DRC: {'order_id': 3, 'drc_id': 9, 'drc_name': 'Southern Debt Solutions', 'created_dtm': {'$date': '2025-02-23T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-02-27T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-22T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': None, 'removed_dtm': None, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 12, 'recovery_officers': [{'ro_id': 3, 'assigned_dtm': {'$date': '2025-05-10T10:00:00.000Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}
2025-05-22 09:31:41 - appLogger - DEBUG - Case 2: expire_date=2025-05-22 00:00:00+00:00, current_date=2025-05-22 04:01:40.596657+00:00, time_to_expiry=-1 day, 19:58:19.403343
2025-05-22 09:31:41 - appLogger - INFO - Case 2 expired. Directing to Letter of Demand.
2025-05-22 09:31:41 - dbLogger - INFO - Updated DRC 9 in case 2 to Expired, Direct to Letter of Demand. Modified count: 1
2025-05-22 09:31:41 - appLogger - DEBUG - Processing case 18 with DRC list: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 09:31:41 - appLogger - DEBUG - Checking DRC list: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 09:31:41 - appLogger - DEBUG - Active DRCs after filtering: [{'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}]
2025-05-22 09:31:41 - appLogger - DEBUG - Selected active DRC: {'order_id': 1, 'drc_id': 5001, 'drc_name': 'ABC Debt Recovery Services', 'created_dtm': {'$date': '2025-02-26T00:00:00.000Z'}, 'drc_status': 'Active', 'status_dtm': {'$date': '2025-03-02T00:00:00.000Z'}, 'expire_dtm': {'$date': '2025-05-25T00:00:00.000Z'}, 'status': None, 'current_status': None, 'case_removal_remark': 'N/A', 'removed_by': 'admin', 'removed_dtm': {'$date': '2025-01-02T00:00:00.000Z'}, 'drc_selection_logic': 'Auto-Assign', 'case_distribution_batch_id': 10, 'recovery_officers': [{'ro_id': 101, 'assigned_dtm': {'$date': '2025-01-01T11:00:00.000Z'}, 'assigned_by': 'supervisor', 'removed_dtm': {'$date': '2025-01-23T01:57:36.210Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:57:36.213Z'}, 'assigned_by': 'System', 'removed_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'case_removal_remark': None}, {'ro_id': 1, 'assigned_dtm': {'$date': '2025-01-23T01:59:37.525Z'}, 'assigned_by': 'System', 'removed_dtm': None, 'case_removal_remark': None}]}
2025-05-22 09:31:41 - appLogger - DEBUG - Case 18: expire_date=2025-05-25 00:00:00+00:00, current_date=2025-05-22 04:01:40.596657+00:00, time_to_expiry=2 days, 19:58:19.403343
2025-05-22 09:31:41 - appLogger - INFO - Sending 3-day alert for case 18 (expires 2025-05-25 00:00:00+00:00)
2025-05-22 09:31:41 - dbLogger - INFO - Updated DRC 5001 in case 18 to Last Alert Received. Modified count: 1
2025-05-22 09:31:41 - dbLogger - INFO - MongoDB connection closed.
2025-05-22 09:31:41 - appLogger - INFO - Validity period check completed successfully
